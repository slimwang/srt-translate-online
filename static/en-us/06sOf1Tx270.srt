1
00:00:00,540 --> 00:00:02,420
Now you'll learn how to run queries to find

2
00:00:02,420 --> 00:00:05,990
conferences that were created by a specific user. Remember that

3
00:00:05,990 --> 00:00:09,050
each conference has an ancestor, and that the ancestor

4
00:00:09,050 --> 00:00:11,300
is the profile entity of the user who created it.

5
00:00:12,700 --> 00:00:14,420
Here's how you creat a query to get all

6
00:00:14,420 --> 00:00:17,490
the entities that have a particular ancestor. You just add

7
00:00:17,490 --> 00:00:21,020
the ancestor function to the end of the query

8
00:00:21,020 --> 00:00:25,640
creation. You need to specify the key of the parent.

9
00:00:25,640 --> 00:00:29,050
That is the key of the ancestor whose descendants

10
00:00:29,050 --> 00:00:32,350
you want to query for. This kind of query is

11
00:00:32,350 --> 00:00:34,620
called an ancestor query, but you could also think

12
00:00:34,620 --> 00:00:36,860
of it as a descendant query that is because it

13
00:00:36,860 --> 00:00:39,850
gets all the descendants of a particular entity. So

14
00:00:39,850 --> 00:00:42,990
conferences for example. You can get all the conferences that

15
00:00:42,990 --> 00:00:46,610
were created by a certain user. So go ahead and

16
00:00:46,610 --> 00:00:51,610
add a new function in ConferenceAPI called getConfrencesCreated that returns

17
00:00:51,610 --> 00:00:54,650
conferences created by the logged in user. So

18
00:00:54,650 --> 00:00:58,440
again, the HTTP method is going to be post. And

19
00:00:58,440 --> 00:01:01,700
this time, the user must be logged in because

20
00:01:01,700 --> 00:01:03,650
you're trying to get the conferences created by the

21
00:01:03,650 --> 00:01:07,020
logged in user and define the function to

22
00:01:07,020 --> 00:01:10,230
return all the conferences that the user created. And

23
00:01:10,230 --> 00:01:13,570
again test on localhost before you deploy to app

24
00:01:13,570 --> 00:01:16,950
spot and run your query on local host first,

25
00:01:16,950 --> 00:01:18,810
because if you deploy direct to app spot the

26
00:01:18,810 --> 00:01:20,810
first, and then try to run the query for the

27
00:01:20,810 --> 00:01:24,530
first time, you're going to find it doesn't work. So

28
00:01:24,530 --> 00:01:28,290
after you've defined and tested your get conferences created method

29
00:01:28,290 --> 00:01:30,330
take a look at the code and come and answer

30
00:01:30,330 --> 00:01:33,240
this quiz. What I want you to do is figure

31
00:01:33,240 --> 00:01:35,670
out which is the right code here to complete this

32
00:01:35,670 --> 00:01:39,460
statement to get all the conferences created by the user.
