1
00:00:00,360 --> 00:00:04,220
Here's something that kind of surprises
many people when they learn SQL.

2
00:00:04,220 --> 00:00:08,630
So far, whenever you've done a select,
you've selected from either a table or

3
00:00:08,630 --> 00:00:10,340
a few joined tables.

4
00:00:10,340 --> 00:00:12,940
There's another thing you
can select from as well,

5
00:00:12,940 --> 00:00:15,580
namely the results of a select query.

6
00:00:15,580 --> 00:00:19,120
This is one form of something called
a subquery or sometimes a subselect.

7
00:00:20,650 --> 00:00:23,310
Remember back in lesson one when
I mentioned that the result of

8
00:00:23,310 --> 00:00:25,350
a query is always a table?

9
00:00:25,350 --> 00:00:26,650
This is why.

10
00:00:26,650 --> 00:00:30,000
Since the result of a query is a table,
you can select from it,

11
00:00:30,000 --> 00:00:32,409
join it, aggregate it, and so on.

12
00:00:32,409 --> 00:00:36,130
Here is a table that lists mooseball
players, and what team they're on,

13
00:00:36,130 --> 00:00:39,180
and the number of points they
scored in the last season.

14
00:00:39,180 --> 00:00:43,140
And here's a query that will find
the highest-scoring player's score for

15
00:00:43,140 --> 00:00:44,410
each team.

16
00:00:44,410 --> 00:00:49,870
This uses the max aggregation, grouping
by team to find the highest score.

17
00:00:49,870 --> 00:00:52,910
But suppose that we want to
know what the average score of

18
00:00:52,910 --> 00:00:54,930
a highest scorer is.

19
00:00:54,930 --> 00:01:00,490
To do this, we can take this whole query
and stick it inside of another query.

20
00:01:00,490 --> 00:01:05,700
The outside query gives the average
of the inside query's results.

21
00:01:05,700 --> 00:01:10,830
The syntax of SQL requires that we give
the subquery result table a name, maxes

22
00:01:10,830 --> 00:01:15,743
here, even though we don't actually
use that word anyplace in the query.

23
00:01:15,743 --> 00:01:17,111
It's just required.

24
00:01:17,111 --> 00:01:19,853
There are several other ways
you can use subqueries as well,

25
00:01:19,853 --> 00:01:23,720
which are beyond the scope of this
course, but can still be very useful.

26
00:01:23,720 --> 00:01:28,100
You can read about another use case,
subquery operations in the where clause,

27
00:01:28,100 --> 00:01:31,010
in the PostgreSQL documentation
linked in the instructor notes.
