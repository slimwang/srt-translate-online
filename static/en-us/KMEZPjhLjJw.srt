1
00:00:00,120 --> 00:00:03,860
So here's this error that we've received
from running our filterPlayground query.

2
00:00:03,860 --> 00:00:06,370
We've gotten this 503
Internal Server Error.

3
00:00:06,370 --> 00:00:08,000
That's not very informative.

4
00:00:08,000 --> 00:00:11,330
We go over to the Developer's Consule,
though, and look under monitoring and

5
00:00:11,330 --> 00:00:14,115
logs, we can see a request to

6
00:00:14,115 --> 00:00:17,920
ConferenceApi.filterPlayground returning
an error.

7
00:00:17,920 --> 00:00:21,560
And if we take a look into that error,
we'll see it says here,

8
00:00:21,560 --> 00:00:24,650
raised NeedIndexError (no
matching index found.

9
00:00:24,650 --> 00:00:28,226
The suggested index for this query is,
and then it has kind: Conference,

10
00:00:28,226 --> 00:00:30,780
properties: city,
month, topics and name.

11
00:00:30,780 --> 00:00:33,820
So normally when test
the app on localHost,

12
00:00:33,820 --> 00:00:35,540
indexes get autogenerated, and

13
00:00:35,540 --> 00:00:39,960
they land in a file called index.yaml
which shows up in your source directory.

14
00:00:39,960 --> 00:00:40,750
As you can see,

15
00:00:40,750 --> 00:00:43,780
there's a previous index from
a simpler version of this query here.

16
00:00:43,780 --> 00:00:46,690
But you can also specifically
define composite indexes for

17
00:00:46,690 --> 00:00:48,150
all queries that you will run.

18
00:00:48,150 --> 00:00:50,280
So knowing what you now
know about indexes,

19
00:00:50,280 --> 00:00:52,470
which of the following
statements are true?

20
00:00:52,470 --> 00:00:53,070
How can you make

21
00:00:53,070 --> 00:00:55,840
sure that you will have all of
the indexes that your queries will need?

22
00:00:55,840 --> 00:00:58,350
Could you manually edit
the index configuration?

23
00:00:58,350 --> 00:01:01,920
Run every multi-property query on
localhost before you deploy to appspot?

24
00:01:01,920 --> 00:01:04,940
Mark all properties you need
indexed with index equals True.

25
00:01:04,940 --> 00:01:07,430
Or for single property indexes,
you don't need to do anything.
